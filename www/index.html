<!DOCTYPE html>
<!--GuiGhost Games - GuiStack- Tower of Balance-->
<!--GuiGhost Games - GuiStack v1.2 March 2018-->


<html>
<head>
    <title>Stacker - Boxes of Balance</title>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, minimum-scale = 1.0, user-scalable = 0, minimal-ui" />
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta property="og:url" content="https://guighostgames.com/Stacker-BoxesOfBalance/index.html" />
    <meta property="og:type" content="game" />
    <meta property="og:title" content="Stacker: Boxes of Balance" />
    <meta property="og:description" content="Fun Physics games of box dropping to get the high score, but don't let them fall -  Family Friendly Free Online Game" />
    <meta property="og:image" content="https://guighostgames.com/Images/Homepage/guiStack1.2.png" />

    <link rel="shortcut icon" sizes="256x256" href="assets/sprites/crate16.png" />

    <!--<!--<!-- Global site tag (gtag.js) - Google Analytics -->
    <!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-97706544-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-97706544-3');
    </script>-->




    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
        }

        body {
            background: #0259a0;
            background: url("images/bg.png") center fixed;
            background-size: contain;
            background-repeat: no-repeat;
            background-color: black;
        }

        canvas {
            touch-action: none;
            -ms-touch-action: none;
        }

        #wrongorientation {
            background: url("images/wrongorientation.png") no-repeat center center fixed;
            background-size: contain;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
            display: none;
        }
        #muteBtn{
            position: absolute;
            bottom: 10px;
            left:auto;
            z-index: 500;
        }
        #muteImg {
            left: 0;
        }
        #gameDiv{
            width:100%;
           

        }
        #selfInterstatial{
            position:absolute;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 99%;
            background-image:url("images/selfPromoteBack.png");
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 3000;
            display: none;
        }
        #selfAdInner {
            position: absolute;
            top: 6%;
            left: 5%;
            width: 90%;
            height: 58%;
            /*background-color: red;*/
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 3000;
        }
        #selfAdGraphic {
            width: 100%;
            background-image: url("images/starMatchPromo1.png");
            background-size: cover;
            background-repeat: no-repeat;
        }
        #gameLink {
            position: absolute;
            left: 50%;
            bottom: 15%;
            width: 232px;
            height: 79px;
            transform: translateX(-120px);
        }
        #gPlayImg {
            display: inline-block;
            width: 300px;
            margin-left: 50%;
            transform: translate(-150px,-5px);
            z-index: 2000;
        }

        #adTimerX {
            position: absolute;
            width: 21px;
            top: 5px;
            right: 20px;
            background-color: lightgray;
            border: 1px double blue;
            border-radius: 15px;
            font-size: 18px;
            font-family: 'Comic Sans MS';
            align-content: center;
            padding-left: 5px;
            padding-right: 1px;
        }

        

     

        #gGlogoMenu {
            background: url("images/gabbyLogo.png");
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
        }







 

       
        #loadingGG {
            position: absolute;
            top: 25%;
            left: 50%;
            min-width: 200px;
            height: 80%;
            transform: translateX(-150px);
            z-index: 15000;
        }


        @-webkit-keyframes heartBeat {
            0% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            14% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            28% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            42% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            70% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }

        @keyframes heartBeat {
            0% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            14% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            28% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }

            42% {
                -webkit-transform: scale(1.3);
                transform: scale(1.3);
            }

            70% {
                -webkit-transform: scale(1);
                transform: scale(1);
            }
        }

        .heartBeat {
            -webkit-animation-name: heartBeat;
            animation-name: heartBeat;
            -webkit-animation-duration: 1.3s;
            animation-duration: 1.3s;
            -webkit-animation-timing-function: ease-in-out;
            animation-timing-function: ease-in-out;
        }



    </style>

    <script src="phaser.min.js"></script>
    <script src="box2d-plugin-full.js"></script>
    <script src="guiStack_New.js"></script>
  

</head>
<body>
    <div id="loadingGG"><IMG SRC="images/loading4.gif"></div>

    <div id="wrongorientation"></div>

    <audio id="NiceSound" class="gameSounds">
        <source src="assets\sounds\OveMelaa-ItaloUnlimited.mp3" type="audio/mp3">
    </audio>
 
   <div id="gameDiv"></div>

    <!--SELF Advertising-->`
    <div id="selfInterstatial">
        .
        <div id="closeSelfAd">X</div>
        <div id="selfAdMain">
            <div id="adTimerX"> 15 </div>
            <div id="selfAdInner">
                <img id="selfAdGraphic" src="images/starMatchPromo1.png" />
              
            </div>
          
            <a id="gameLink" class="external-link" href='https://play.google.com/store/apps/details?id=com.GuiGhostGames.StarMatch2048' target='_blank'><img id="gPlayImg" alt='Get it on Google Play' src='images/google-play-badge_altered.png' /></a>
      
        </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

  

 <script type=text/javascript>


     //cordova in app browser

          document.getElementById("selfAdGraphic").onclick = openLink;
          document.getElementById("gPlayImg").onclick = openLink;

          function openLink() {
                cordova.plugins.market.open('com.GuiGhostGames.StarMatch2048');
          }

        var selfPromote = false;
        var selfTick = 0;
        var adTimerDiv = document.getElementById("adTimerX");
        var selfAdCountdown = 15;
        var selfAdLocalStore = localStorage.getItem("showSelfAd");

        function checkSelfPromote() {
            selfTick++;
            if (selfTick == 2) {
                selfPromote = true; selfTick = 0;
            };
            selfAdLocalStore = localStorage.getItem("showSelfAd");
            console.log("selfAdLocalStore  showSelfAd = " + selfAdLocalStore);
            if (selfAdLocalStore == 1) {

                var selfInter = document.getElementById("selfInterstatial");
                selfInter.style.display = "block";
                handleAdTimer();
                localStorage.setItem("showInterstatial", 0);
                selfPromote = false;
                localStorage.setItem("showSelfAd", 0);
                 selfAdLocalStore = 0
            var gPlayBtn = document.getElementById("gPlayImg");
            gPlayBtn.className += "heartBeat";

            }
            else {
                console.log("self Promote NOT active- fireEnhance");
                fireEnhance();

            }

        }
        function fireEnhance() {

                try { Enhance.isInterstitialReady(callback); }
                catch (err) { console.log("caughtx = " + err) }
                localStorage.setItem("showInterstatial", 0);

        }



        var callback = function (result) {
               if(!result) {
                     console.log('Interstitial ad is not ready');

                    return;
                }
                try { Enhance.showInterstitialAd(); }
                catch (err) { console.log("caughtError = " + err) };

        };
        var currentAdStep = 0;
        var adImgStep = 1;
        var adImg = document.getElementById("selfAdGraphic");
        var timerInProgress = 1;
        function handleAdTimer() {
            if (timerInProgress == 1) {
                timerInProgress = 0;

                    var adInterval = setInterval(function () {
                        currentAdStep++;

                        if (currentAdStep == 3 || currentAdStep == 6 || currentAdStep == 9 || currentAdStep == 12 || currentAdStep == 15) { adImgStep++;}

                            if (adImgStep > 6) { adImgStep = 1; }
                            adImg.src = "images/starMatchPromo" + adImgStep + ".png";

                        selfAdCountdown = selfAdCountdown - 1;
                        adTimerDiv.innerHTML = selfAdCountdown;
                        if (selfAdCountdown <= 0) {
                            adTimerDiv.innerHTML = "X";
                            selfAdCountdown = 0;
                        }
                        if (currentAdStep > 16) {
                            clearInterval(adInterval);
                            currentAdStep = 0;
                            adImgStep = 1;
                            adImg.src = "images/starMatchPromo" + adImgStep + ".png";
                        }
                    }, 1000);


            }
            else { timerInProgress = 1; }
        }
        adTimerDiv.onclick = function () {
            if (selfAdCountdown == 0) {
                document.getElementById("selfInterstatial").style.display = "none";
                currentAdStep = 0;
                selfAdCountdown = 15;
                adImgStep = 1;
                adImg.src = "images/starMatchPromo1.png";
            }
            else { return;}
        }

        // set interval to check for interstatial

        var showItOrNo = localStorage.getItem("showInterstatial");
        var onceOnlyAd = 0;
        var tid = setInterval(interPop, 500);

        function interPop() {
            showItOrNo = localStorage.getItem("showInterstatial");
            if(showItOrNo == 1) {   checkSelfPromote(); }
                            }






         // try {
         //     Enhance.logEvent('AppLaunch');
         //} catch(err) { console.log("caught attempt to logEvent: " + err)}




 </script>

</body>
</html>
<!--//Credits to http://www.emanueleferonato.com/ for the tuturial on the javascript that started this project-->